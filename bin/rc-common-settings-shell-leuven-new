#!/usr/bin/env bash

# Configure the time format for `ls` to display dates as "YYYY-MM-DD Day HH:MM".
export TIME_STYLE=+"%Y-%m-%d %a %H:%M"

# Alias 'hgrep' to search command history with case-insensitive grep.
alias hgrep='history | grep -i'

# Check if 'rg' command is available.
if command -v rg > /dev/null 2>&1; then

    # Define a function 'rgc' to always include the '-C 1' option for context
    # lines.
    rgc() {
        rg -C 1 "$@" | sed '/'"$@"'/! s/^.*$/\x1b[90m&\x1b[0m/; s/\('"$@"'\)/\x1b[1;31m\1\x1b[0m/g'
    }

    alias rg='rg --hidden'

    # Alias 'rgno' to 'rg -l' for listing filenames with matches.
    alias rgno='rg -l'

    # Define a function 'rgext' for a case-insensitive search within files
    # matching a specific extension.
    rgext() {
        if [[ $# -ne 2 ]]; then
            printf "Usage: rgext EXTENSION PATTERN\n"
            return 2
        fi
        rg --glob "*.$1" -i -C 1 "$2"
    }

fi
